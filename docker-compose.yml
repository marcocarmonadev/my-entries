name: my-entries-preview

services:
  backend:
    build: backend
    container_name: my-entries-backend-preview
    env_file: backend/.env
    healthcheck:
      test: curl -f http://localhost:8001/api/health
    image: marcocarmonapy/my-entries-backend:preview
    network_mode: host
    pull_policy: build
    volumes:
      - ./backend/local.db:/workdir/local.db

  frontend:
    build: frontend
    container_name: my-entries-frontend-preview
    depends_on:
      backend:
        condition: service_healthy
    env_file: frontend/.env
    image: marcocarmonapy/my-entries-frontend:preview
    network_mode: host
    pull_policy: build
